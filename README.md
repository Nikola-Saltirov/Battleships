# „Battleships“ - проектна задача по Визуелно Програмирање

## Изработен од: Никола Салтиров - 221231, Андреј Трајковски - 223255 && Андреј Бајалски - 221147

### 1. Краток опис на апликацијата:
Проектот „Battleships“ е Windows Forms App (.NET Framework) апликација, базирана на истоимената стратешка игра, наменета за двајца играчи, каде целта е да се победи така што ќе се погодат и потопат сите бродови на противникот. Просторот за играње е поделен на два еднакви дела, а секој дел е поделен на одреден број полиња, во кои може да се наоѓа или да не се наоѓа противнички брод. Играта се игра така што најизменично напаѓа играчот (корисникот), па напаѓа компјутерот (AI), се додека не се потопат сите бродови на едниот играч (корисникот или компјутерот).

### 2. Упатство за користење на играта:

#### 2.1 Старт на апликацијата
![слика 1](https://github.com/AndrejT03/Battleships/assets/164937981/483bc87b-f61b-4059-a3d9-c81da9212bf5)
<p align="center"> слика 1</p>

На почетниот прозорец (слика 1), се појавува иницијална форма каде се појавува копче „START!“ каде се очекува потврда на корисниот дека сака да започне со играње на играта. Со клик на копчето корисникот се упатува на нов поглед, така што се ажурира формата.

#### 2.2 Редење на бродови

![слика 2](https://github.com/AndrejT03/Battleships/assets/164937981/431d53e8-ceb5-4e66-a154-fae40040ae36)
<p align="center"> слика 2 </p> 

<p align="center">
    <img src="https://github.com/AndrejT03/Battleships/assets/164937981/66da1d45-7c6e-4cd5-ad9d-7a275b07a3df" alt="слика 2.1">
    <br>
    <span>Слика 2.1</span>
</p>

На формата (слика 2), од левата страна (слика 2.1), се покажува матрица 10х10 на која корисникот треба да намести 5 бродови (два со големина 2, два со големина 3 и еден со големина 4). Матрицата има имплементирана можност доколку корисникот се одлучи дека не е задоволен од позицијата на бродот, едноставно да го деселектира така што ќе кликне на било кое поле од веќе поставениот брод. Секое поле има имплементирано функција така што при hover со маус, исто се затемнува бојата на истото. Исто така доколку има преклопување на бродовите (при поставување на нов брод) се покажува соодветна порака на корисникот и не дозволува да се постави бродот.

<p align="center">
    <img src="https://github.com/AndrejT03/Battleships/assets/164937981/a7fae530-4f49-4645-9256-8047608df30c" alt="слика 2.2">
    <br>
    <span>Слика 2.2</span>
</p>
Од десната страна на формата (слика 2.2) има копче „START“, 3 лабели и 2 групи на Radio-Buttons. Секоја од лабелите покажува бројка на тоа колку бродови се останати за поставување (првата покажува на бродовите со должина 2, втората на должина 3, а третата на должина 4) и истите се ажурираат при поставување на соодветен брод. Првата група на Радио-копчиња му овозможува на корисникот да селектира каков брод ќе поставува, а втората група му дава можност да одбере дали истиот ќе го постави хоризонтално или вертикално (оваа опција не е дозволена кога ќе биде селектирано брод со должина 4, бидејќи е коцка). Формата по автоматизам му овозможува на корисникот да внесува бродови со должина 2 хоризонтално, се додека корисникот не селектира друго копче. Кога ќе ги постави сите бродови (му се појавува соодветна порака - слика 2.3), а корисникот треба да кликне на копчето „START“ за да ја започне играта, во спротивно (доколку нема поставено ниту еден брод или ги нема поставено сите бродови) му се појавува порака која му укажува дека мора да ги постави сите бродови за да продолжи понатаму (слика 2.4).

<p align="center">
    <img width=30% height=200px src="https://github.com/AndrejT03/Battleships/assets/164937981/d6642b0e-e605-4d07-be6b-22eddc465622" alt="слика 2.3">
    <img width=30% height=200px src="https://github.com/AndrejT03/Battleships/assets/164937981/4559bd7c-de62-4a08-9f0b-e7601c1c587f" alt="слика 2.4">
    <br>
    <span>Слика 2.3 && 2.4</span>
</p>

#### 2.3 Самата игра

Со ажурирање на формата при клик на копчето старт од претходната форма, започнува играта. Самата игра има изглед: (слика 3)
<p align="center">
    <img src="https://github.com/AndrejT03/Battleships/assets/164937981/af8ca28f-5415-4184-8242-fc8ff554b8c6" alt="слика 3" />
    <span>Слика 3</span>
</p>
На формата се испишуваат две матрици, лабела за чив ред е, копче за нова игра и статус бар на дното на формата. Левата матрица ја претставува матрицата на противникот (AI), која со помош на Рандом генератор на броеви е исполнета со бродови и на истата не се покажуваат бродовите (работа на корисникот е да ги открие и погоди). Десната матрица претставува матрицата што корисникот ја внесуваше во минатиот чекор, а истата ќе биде погодувана од страна на компјутерот (AI). Напаѓањето од страната на компјутерот се одвива на начинот на тоа што со помош на фунцкијата new Random(), се генерираат рандом бројки кои претставуваат позиции во матрицата и истите се погодуваат. При погодување на поле во матрицата може да се случат два настани: Погодок (Hit) и Промашување (Miss). При погодок (погоден дел од бродот) полето се бои црвено (слика 3.2), а при промашување (не е погоден брод) се бои сиво (слика 3.3), додека доколку полето не е нападнато ја има стандардната (сина) боја (слика 3.1).

<p align="center">
    <img width=150px height=150px src="https://github.com/AndrejT03/Battleships/assets/164937981/b3b0ba10-f4a1-4a84-82a5-58609e8da46b" alt="слика 3.1">
    <img width=150px height=150px src="https://github.com/AndrejT03/Battleships/assets/164937981/9ba34e95-c3b9-4fcb-8a2b-73165349c389" alt="слика 3.2">
    <img width=150px height=150px src="https://github.com/AndrejT03/Battleships/assets/164937981/cf02b158-9c82-4cd4-abe3-5e1fe5186a5d" alt="слика 3.3">
    <br>
    <span>Слика 3.1, 3.2 && 3.3</span>
</p>

Начинот на играње се одвива на начин што прво напаѓа корисникот, па напаѓа компјутерот (AI). Кога напаѓа комјутерот, на корисникот не му е дозволено да напаѓа, се додека не заврши нападот на компјуерот. Истото важи и за компјутерот. Доколку корисникот погоди дел од бродот (полето се бои црвено и се зголемува бројот на погодоци) му се дава можност повторно да нападне се додека не промаши, а кога ќе промаши (се зголемува бројот на промашувања) и следен е компјутерот да напаѓа. Дали е негов ред да напаѓа, корисникот може да види визуелно преку лабелата (која се наоѓа над матрицата што треба да ја напаѓа) во која се испишува текст дали е негов ред (слика 4.1 и слика 4.2).

<p align="center">
    <img width=150px src="https://github.com/AndrejT03/Battleships/assets/164937981/e957980b-c321-4c42-a3ec-eb26101cbfb2" alt="слика 4.1">
    <img width=150px src="https://github.com/AndrejT03/Battleships/assets/164937981/9c95fdd3-83fc-48f3-995f-bc5a55f77261" alt="слика 4.2">
    <br>
    <span>Слика 4.1 && 4.2</span>
</p>

Играта корисникот ја игра се додека не се случат еден од следните два настани:
1. Корисникот ги погоди сите бродови на компјутерот (AI)
2. Компјутерот (AI) ги погоди сите бродови на корисникот.
При настан 1 корисникот победува и соодветно му се покажува порака (слика 5.1). При настан 2 корисникот губи и соодветно му се покажува порака (слика 5.2).

<p align="center">
    <img width=30% height=165px src="https://github.com/AndrejT03/Battleships/assets/164937981/95da09f1-7930-466c-bbbc-383e5c8f131e" alt="слика 5.1">
    <img width=30% height=165px  src="https://github.com/AndrejT03/Battleships/assets/164937981/28a1ce04-d437-4fd4-8d8d-56766da7140b" alt="слика 5.2">
    <br>
    <span>Слика 5.1 && 5.2</span>
</p>

На крај корисникот може да кликне на копчето „NEW GAME“ со што ќе се рестартира формата и ќе се започне нова игра (слика 1).

### 3. Користен код:

Главниот код се наоѓа во класата Form1.cs, каде што се изведуваат и класите: Ship, CreateShip, EnemyShip и OurShip.

#### 3.1 Form1.cs:

Во класата Form1.cs се дефинирани различни елементи на корисничкиот интерфејс и функционалности за играта. Главните компоненти вклучуваат:

- Променливи за чување на бродовите на непријателот и нашите бродови, како и за создавање на нови бродови.
- Статусна лента и лабели за прикажување информации за играта, како што се број на погодоци и промашувања.
- Различни копчиња за додавање бродови, започнување нова игра и започнување на поставување на бродови.
- Радио копчиња за избор на тип на бродови и ориентација (вертикална или хоризонтална).

Методи во класата се:
- initLabels - Метод за прикажување на сите лабели.
- AddShipClick - Метод за прикажување потребните елементи од корисничкиот интерфејс за да започне играта или да се прикаже состојба на играта откако ќе бидат поставени сите бродови.
- UpdateStatusLabel - Метод за ажурирање на статусната лента според бројот на погодоци и промашувања.
- InitializeGame - Метод за иницијализација на различни компоненти и поставки на играта.
- CreateShips - Метод за создавање нови бродови и поставување на нивните панели.
- newGame - Метод за управување со почеток на нова игра.

#### 3.2 Cell.cs:

Класата Cell претставува поединечнoто поле во матрицата. Полето има координати x и y, состојба state, и може да биде обележана како "hovered". Големината на полето е зададена како статична променлива cellSize со вредност 40.
Состојбата на полето се интерпретира на следниот начин:
- 0: нема брод, нема погодок
- 1: има брод, нема погодок
- 2: има брод, има погодок
- 3: нема брод, има погодок
Класта го има методот Draw го црта визуелниот приказ на полето во зависност од неговото состојба. Полињата можат да бидат обоени со различни бои: темно-сина (hovered), портокалова (има брод), црвена (погодок на брод), или сива (погодок на празно место).

#### 3.3 Ship.cs:

Класата Ship е апстрактна класа која претставува брод во играта. Таа има следниве карактеристики и методи:
- panel: панел за прикажување на таблата.
- size: големина на бродот.
- matrix: матрица од клетки (Cell) која ја претставува матрицата за играње.
- x1, x2, y1, y2: координати за поставување на панелот.
- cellSize: големина на едно поле.
- OurHits и EnemyHits: статички променливи за следење на погодоци.
  
Класата има конструктор кој ја иницијализира матрицата од полиња, метод addShip за додавање брод на одредена позиција, метод checkHit за проверка на погодок, и метод InitializeMatrixPanel за иницијализација на панелот и поврзување на настани за цртање и интеракција.

#### 3.4 CreateShip.cs:

Класата CreateShip ја наследува класата Ship и управува со поставувањето на бродови на матрицата. Класата има различни параметри како што се SetCounter, adder1, adder2, sadder1, sadder2 и речникот types за да го следи бројот на различни типови бродови (TWO, THREE, SQUARE).

Методите во класата вклучуваат:
- CheckNeighboorTwo: проверува дали соседното поле е празно.
- twocheck: одредува дали брод со големина 2 може да се постави хоризонтално или вертикално.
- threecheck: одредува дали брод со големина 3 може да се постави хоризонтално или вертикално.
- checksquare: одредува дали брод со големина 4 (коцка) може да се постави.
- Check: се справува со проверката и поставувањето на бродовите на таблата врз основа на селекцијата од корисникот.
- HoverCheck: управува со визуелното обележување на полињата кога корисникот го поместува глувчето врз таблата.
Методот Check го проверува изборот на корисникот и поставувањето на бродовите, осигурувајќи дека правилата на играта се почитуваат. Ако поставувањето е невалидно, се прикажува порака за грешка. Кога сите бродови се поставени, се прикажува порака дека нема повеќе преостанати бродови за поставување.

#### 3.5 EnemyShip.cs:

Класата EnemyShip наследува од класата Ship и ги претставува бродовите на противникот. Во конструкторот EnemyShip се генерираат случајни координати за поставување на бродовите на противникот со различна големина (2, 3, и 4 единици). 

Класата ги има следните методи:
- Методите generateShip2, generateShip3, и generateShip4 се користат за поставување на бродовите на таблата на основа на дадените координати и насоки, и проверуваат дали полето е слободно за поставување.
- Методот Check се извршува при клик на маусот, проверувајќи дали има погодок на противнички брод. Ако има погодок, се ажурира бројот на погодоци и статусната линија на формата, и проверува дали играта е завршена.
- Методот HoverCheck се извршува при движење на маусот над матрицата, обележувајќи го полето над која се наоѓа маусот за визуелна индикација.

#### 3.5 OurShip.cs:

Класата CreateShip ја наследува класата Ship и управува со нашите бродови во играта. Во конструкторот се иницијализираат сите важни променливи и тајмери потребни за играта. Иницијализацијата вклучува и подесување на тајмери кои овозможуваат временско одмерување помеѓу потезите.
Методите во класата се:
- newValues(): Генерира нови случајни координати за следниот потег, вклучувајќи и случајни корекции доколку веќе има погодок.
- hits(): Опслужување на погодоците на противничките бродови, вклучувајќи проверка на состојбата на погоденаото поле и одредување на следните потези.

Во класата има вклучено и обработка на тајмери:
- ticked(): Се повикува откако ќе заврши времето за анимација на потегот на противникот.
- ticking(): Се повикува откако ќе заврши времето за анимација на нашиот потег, врши проверка на погодоците и дозволува следен потег на играчот.
